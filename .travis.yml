language: go
install: go mod download github.com/gohugoio/hugo@v0.46.0
before_script:
  - sudo apt-get update
  - sudo apt-get install nodejs npm
  - sudo npm set strict-ssl false
  - sudo npm install -g gulp
  - export GO111MODULE=on
  - go mod init
script:
  - npm install
  - gulp
  - hugo
  - gulp
  - bash ./deploy.sh
notifications:
    email:
        on_failure: always
branches:
  only:
  - master